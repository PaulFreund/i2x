//###################################################################################################
// Create Function

module.exports.create = function(_events, _config) {
    return new Handler(_events, _config);
};

//###################################################################################################
// Basic Object
function Handler(_events, _config) {
    /////////////////////////////////////////////////////////////////////////////////////////////////
   
    var
    ////=============================================================================================
    // Requirements
    
    ////=============================================================================================
    // Properties
    
        name = 'action',
        self = this,
        events, 
        config,
    
    ////=============================================================================================
    // Methods
    
        ////-----------------------------------------------------------------------------------------
        // Initialize
        init = function(_events, _config) {
            if( _events !== undefined )
                events = _events;
            else
                console.error('['+name+']EventEmitter undefined');
            
            if( _config !== undefined )
                config = _config;
            else
                events.emit('error', name, 'Options undefined');
                        
        },        
        
        ////-----------------------------------------------------------------------------------------
        // IRC Command
        onIRCCommand = function(from, to, command) {
            var args = command.split(' ');
            
            if( args[0] === 'add' ) {
                store.emit('set', 'command.'+args[1], command.substr(args[0].length+args[1].length+2));
            }
            else if( args[0] === 'del' ) {
                store.emit('remove', 'command.'+args[1]);
            }
            else {
                store.emit('get', 'command.'+args[0], function(value) {
                if( value != undefined )
                    eval(value);
            });
            }
        }

    ////=============================================================================================
    ;

    /////////////////////////////////////////////////////////////////////////////////////////////////

    init(_events, _config);
    
    /////////////////////////////////////////////////////////////////////////////////////////////////
}
